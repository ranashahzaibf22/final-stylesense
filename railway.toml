# Railway.app Configuration for StyleSense.AI Backend Deployment
# This file configures Railway to properly build the backend from the backend directory

[build]
# Use Docker builder instead of Nixpacks for better control
builder = "DOCKERFILE"
# Specify the Dockerfile path relative to the repository root
dockerfilePath = "backend/Dockerfile"
# Set the Docker build context to the backend directory
# This ensures COPY commands in Dockerfile find files in the correct location
dockerContext = "backend"
# Watch for changes in the backend directory
watchPaths = ["backend/**"]

[deploy]
# Railway will automatically detect and use start.sh if it exists and is executable
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# Health Check
[healthcheck]
path = "/api/health"
interval = 30
timeout = 10
