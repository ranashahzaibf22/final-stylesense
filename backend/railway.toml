# Railway.app Configuration for Backend Deployment

# This file configures the deployment of the StyleSense.AI backend on Railway.app

# Build Configuration
[build]
builder = "NIXPACKS"
buildCommand = "pip install -r requirements.txt"

# Start Configuration  
[deploy]
# Railway will automatically detect and use start.sh if it exists and is executable
# If start.sh fails, Railway will fall back to the Procfile
# The startCommand can be explicitly set, but it's better to let Railway auto-detect
# startCommand = "bash start.sh"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# Health Check
# Railway will periodically check this endpoint to ensure the service is running
[healthcheck]
path = "/api/health"
interval = 30
timeout = 10

# Environment Variables Configuration
# Set these in the Railway dashboard under "Variables" tab:
#
# Required Variables:
# - PORT: Automatically provided by Railway (don't set manually)
# - MONGODB_URI: MongoDB connection string (e.g., mongodb+srv://user:pass@cluster.mongodb.net/stylesense)
# - FLASK_SECRET_KEY: Strong random secret key for Flask sessions
#
# Optional Variables:
# - HF_API_KEY: Hugging Face API key for AI/ML models (VTON-HD, transformers)
# - OPENWEATHER_API_KEY: OpenWeatherMap API key for weather-based recommendations
# - CORS_ORIGINS: Comma-separated list of allowed frontend URLs (e.g., https://yourdomain.vercel.app)
# - FLASK_DEBUG: Set to "False" in production (default: False)
# - USE_GPU: Set to "True" if GPU is available (default: False)
# - WORKERS: Number of Gunicorn workers (default: 4)
# - TIMEOUT: Worker timeout in seconds (default: 120)
